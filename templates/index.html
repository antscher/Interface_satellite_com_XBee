<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mission Operations Software - ESP32</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <div class="main-layout">
    
    <!-- Partie gauche : Contr√¥le et image -->
    <div class="left-panel">
      <h1>üõ∞Ô∏è Mission Operations Software</h1>

      <form id="connect-form" class="form-row">
        <input type="text" id="port" name="port" placeholder="e.g., COM15" required>
        <button type="submit">Connect</button>
        <button type="button" id="unlink-button" disabled>Unlink</button>
      </form>

      <div class="uplink-form">
        <input type="text" id="uplink-command" placeholder="e.g., 0x13 0xAA 0xB0 0x01 (4 bytes)">
        <button type="button" id="uplink-button" disabled>Uplink</button>
      </div>

      <div class="buttons-row">
        <button id="capture-button" disabled>üì∏ Take Picture</button>
        <button id="abort-button" disabled>‚ùå Abort</button>
      </div>

      <div id="image-container">
        <img id="photo" src="" alt="Captured" class="placeholder-image">
      </div>
    </div>

    <!-- Partie droite : Infos suppl√©mentaires -->
    <div class="status-wrapper">
      <!-- Panneau gauche -->
      <div class="status-panel left-panel">
        <h2>ISU Groundstation</h2>
        <div class="status-section">
          <p><strong>Latitude :</strong> <span id="lat">48.5233 N</span></p>
          <p><strong>Longitude :</strong> <span id="long">7.7369 E</span></p>
          <p><strong>Altitude :</strong> <span id="alt">143 m</span></p>
        </div>
        <div style="margin-bottom: 50px;">
        <!--  link for N2YO ISS tracker:https://www.n2yo.com/widgets/ -->
        <script>
          var norad_n2yo = '25544';      // ISS
          var size_n2yo = 'small';       // small = ~400px
          var allpasses_n2yo = '1';      // show only next pass
          var map_n2yo = '2';            // map type
        </script>
        <script type="text/javascript" src="https://www.n2yo.com/js/widget-tracker.js"></script>
        </div >
      </div>

      <!-- Panneau droit + logo -->
      <div class="right-column">
        <div class="logo-container">
          <img src="{{ url_for('static', filename='isu_logo.png') }}" alt="ISU Logo">
        </div>
        <div class="status-panel right-panel">
          <h2>Satellite Status</h2>
          <div class="status-section">
            <p><strong>Temperature :</strong> <span id="temp-value">-- ¬∞C</span></p>
            <p><strong>Humidity :</strong> <span id="humidity-value">-- %</span></p>
            <p><strong>Pressure :</strong> <span id="pressure-value">-- hPa</span></p>
          </div>
          <hr>
          <div class="status-section">
            <p><strong>Acceleration x :</strong> <span id="acc-x">--</span></p>
            <p><strong>Acceleration y :</strong> <span id="acc-y">--</span></p>
            <p><strong>Acceleration z :</strong> <span id="acc-z">--</span></p>
          </div>
          <hr>
          <div class="status-section">
            <p><strong>Gyro x :</strong> <span id="gyro-x">--</span></p>
            <p><strong>Gyro y :</strong> <span id="gyro-y">--</span></p>
            <p><strong>Gyro z :</strong> <span id="gyro-z">--</span></p>
          </div>
          <hr>
          <!-- Refresh rate buttons -->
          <div class="status-section" style="margin-top:18px;">
            <label><strong>Refresh rate:</strong></label>
            <div class="refresh-buttons">
              <button type="button" class="refresh-btn" data-cmd="REFRESH_15" disabled>15s</button>
              <button type="button" class="refresh-btn" data-cmd="REFRESH_30" disabled>30s</button>
              <button type="button" class="refresh-btn" data-cmd="REFRESH_45" disabled>45s</button>
              <button type="button" class="refresh-btn" data-cmd="REFRESH_60" disabled>60s</button>
              <button type="button" class="refresh-btn" data-cmd="NO_REFRESH" disabled>Off</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
